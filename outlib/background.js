(typeof self.window === 'undefined' ? self.window = self : void 0);
(()=>{var Qe=Object.create;var xe=Object.defineProperty;var er=Object.getOwnPropertyDescriptor;var rr=Object.getOwnPropertyNames;var nr=Object.getPrototypeOf,tr=Object.prototype.hasOwnProperty;var q=(e,r)=>()=>(e&&(r=e(e=0)),r);var K=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var sr=(e,r,n,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of rr(r))!tr.call(e,a)&&a!==n&&xe(e,a,{get:()=>r[a],enumerable:!(s=er(r,a))||s.enumerable});return e};var Z=(e,r,n)=>(n=e!=null?Qe(nr(e)):{},sr(r||!e||!e.__esModule?xe(n,"default",{value:e,enumerable:!0}):n,e));var he=K((ge,be)=>{(function(e,r){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],r);else if(typeof ge<"u")r(be);else{var n={exports:{}};r(n),e.browser=n.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ge,function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{let r="The message port closed before a response was received.",n=s=>{let a={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(a).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class t extends WeakMap{constructor(A,i=void 0){super(i),this.createItem=A}get(A){return this.has(A)||this.set(A,this.createItem(A)),super.get(A)}}let l=d=>d&&typeof d=="object"&&typeof d.then=="function",m=(d,A)=>(...i)=>{s.runtime.lastError?d.reject(new Error(s.runtime.lastError.message)):A.singleCallbackArg||i.length<=1&&A.singleCallbackArg!==!1?d.resolve(i[0]):d.resolve(i)},p=d=>d==1?"argument":"arguments",v=(d,A)=>function(g,...u){if(u.length<A.minArgs)throw new Error(`Expected at least ${A.minArgs} ${p(A.minArgs)} for ${d}(), got ${u.length}`);if(u.length>A.maxArgs)throw new Error(`Expected at most ${A.maxArgs} ${p(A.maxArgs)} for ${d}(), got ${u.length}`);return new Promise((w,b)=>{if(A.fallbackToNoCallback)try{g[d](...u,m({resolve:w,reject:b},A))}catch(f){console.warn(`${d} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,f),g[d](...u),A.fallbackToNoCallback=!1,A.noCallback=!0,w()}else A.noCallback?(g[d](...u),w()):g[d](...u,m({resolve:w,reject:b},A))})},x=(d,A,i)=>new Proxy(A,{apply(g,u,w){return i.call(u,d,...w)}}),T=Function.call.bind(Object.prototype.hasOwnProperty),h=(d,A={},i={})=>{let g=Object.create(null),u={has(b,f){return f in d||f in g},get(b,f,_){if(f in g)return g[f];if(!(f in d))return;let c=d[f];if(typeof c=="function")if(typeof A[f]=="function")c=x(d,d[f],A[f]);else if(T(i,f)){let E=v(f,i[f]);c=x(d,d[f],E)}else c=c.bind(d);else if(typeof c=="object"&&c!==null&&(T(A,f)||T(i,f)))c=h(c,A[f],i[f]);else if(T(i,"*"))c=h(c,A[f],i["*"]);else return Object.defineProperty(g,f,{configurable:!0,enumerable:!0,get(){return d[f]},set(E){d[f]=E}}),c;return g[f]=c,c},set(b,f,_,c){return f in g?g[f]=_:d[f]=_,!0},defineProperty(b,f,_){return Reflect.defineProperty(g,f,_)},deleteProperty(b,f){return Reflect.deleteProperty(g,f)}},w=Object.create(d);return new Proxy(w,u)},y=d=>({addListener(A,i,...g){A.addListener(d.get(i),...g)},hasListener(A,i){return A.hasListener(d.get(i))},removeListener(A,i){A.removeListener(d.get(i))}}),C=new t(d=>typeof d!="function"?d:function(i){let g=h(i,{},{getContent:{minArgs:0,maxArgs:0}});d(g)}),M=new t(d=>typeof d!="function"?d:function(i,g,u){let w=!1,b,f=new Promise(k=>{b=function(I){w=!0,k(I)}}),_;try{_=d(i,g,b)}catch(k){_=Promise.reject(k)}let c=_!==!0&&l(_);if(_!==!0&&!c&&!w)return!1;let E=k=>{k.then(I=>{u(I)},I=>{let j;I&&(I instanceof Error||typeof I.message=="string")?j=I.message:j="An unexpected error occurred",u({__mozWebExtensionPolyfillReject__:!0,message:j})}).catch(I=>{console.error("Failed to send onMessage rejected reply",I)})};return E(c?_:f),!0}),P=({reject:d,resolve:A},i)=>{s.runtime.lastError?s.runtime.lastError.message===r?A():d(new Error(s.runtime.lastError.message)):i&&i.__mozWebExtensionPolyfillReject__?d(new Error(i.message)):A(i)},B=(d,A,i,...g)=>{if(g.length<A.minArgs)throw new Error(`Expected at least ${A.minArgs} ${p(A.minArgs)} for ${d}(), got ${g.length}`);if(g.length>A.maxArgs)throw new Error(`Expected at most ${A.maxArgs} ${p(A.maxArgs)} for ${d}(), got ${g.length}`);return new Promise((u,w)=>{let b=P.bind(null,{resolve:u,reject:w});g.push(b),i.sendMessage(...g)})},U={devtools:{network:{onRequestFinished:y(C)}},runtime:{onMessage:y(M),onMessageExternal:y(M),sendMessage:B.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:B.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},$={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return a.privacy={network:{"*":$},services:{"*":$},websites:{"*":$}},h(s,U,a)};e.exports=n(chrome)}})});var Q=K((kr,le)=>{var ir=e=>typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?()=>{let r=crypto.getRandomValues(new Uint8Array(1))[0];return(r>=e?r%e:r).toString(e)}:()=>Math.floor(Math.random()*e).toString(e),ve=(e=7,r=!1)=>Array.from({length:e},ir(r?16:36)).join("");le.exports=ve;le.exports.default=ve});var ye,_e,ar,ke,Te,J,Ce=q(()=>{ye=Z(Q(),1),_e=()=>`uid::${(0,ye.default)(7)}`,ar=(e,r=["endpointName","fingerprint"])=>typeof e=="object"&&e!==null&&r.every(n=>n in e),ke=e=>{try{let r=JSON.parse(e);return ar(r)?r:null}catch{return null}},Te=()=>{let e=[];return{add:(...r)=>{e=[...e,...r]},remove:r=>{e=typeof r=="string"?e.filter(n=>n.message.transactionId!==r):e.filter(n=>!r.includes(n))},entries:()=>e}},J=class{static toBackground(e,r){return e.postMessage(r)}static toExtensionContext(e,r){return e.postMessage(r)}}});var or,gr,lr,Ee,mr,cr,Ie,F,G,dr,H,Y,me=q(()=>{or=Object.defineProperty,gr=Object.defineProperties,lr=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,mr=Object.prototype.hasOwnProperty,cr=Object.prototype.propertyIsEnumerable,Ie=(e,r,n)=>r in e?or(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,F=(e,r)=>{for(var n in r||(r={}))mr.call(r,n)&&Ie(e,n,r[n]);if(Ee)for(var n of Ee(r))cr.call(r,n)&&Ie(e,n,r[n]);return e},G=(e,r)=>gr(e,lr(r)),dr=/^((?:background$)|devtools|popup|options|content-script|window)(?:@(\d+)(?:\.(\d+))?)?$/,H=e=>{let[,r,n,s]=e.match(dr)||[];return{context:r,tabId:+n,frameId:s?+s:void 0}},Y=({context:e,tabId:r,frameId:n})=>["background","popup","options"].includes(e)?e:`${e}@${r}${n?`.${n}`:""}`});function Pe(e,r={}){let{maxDepth:n=Number.POSITIVE_INFINITY}=r;return typeof e=="object"&&e!==null?Se({from:e,seen:[],forceEnumerable:!0,maxDepth:n,depth:0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}var Ar,ce,ur,Se,Me=q(()=>{Ar=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],ce=Symbol(".toJSON was called"),ur=e=>{e[ce]=!0;let r=e.toJSON();return delete e[ce],r},Se=({from:e,seen:r,to_:n,forceEnumerable:s,maxDepth:a,depth:t})=>{let l=n||(Array.isArray(e)?[]:{});if(r.push(e),t>=a)return l;if(typeof e.toJSON=="function"&&e[ce]!==!0)return ur(e);for(let[m,p]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(p)){l[m]="[object Buffer]";continue}if(p!==null&&typeof p=="object"&&typeof p.pipe=="function"){l[m]="[object Stream]";continue}if(typeof p!="function"){if(!p||typeof p!="object"){l[m]=p;continue}if(!r.includes(e[m])){t++,l[m]=Se({from:e[m],seen:[...r],forceEnumerable:s,maxDepth:a,depth:t});continue}l[m]="[Circular]"}}for(let{property:m,enumerable:p}of Ar)typeof e[m]=="string"&&Object.defineProperty(l,m,{value:e[m],enumerable:s?!0:p,configurable:!0,writable:!0});return l}});var de,Oe=q(()=>{de=()=>({events:{},emit(e,...r){(this.events[e]||[]).forEach(n=>n(...r))},on(e,r){return(this.events[e]=this.events[e]||[]).push(r),()=>this.events[e]=(this.events[e]||[]).filter(n=>n!==r)}})});var Ae,Le,Ne,z,ee,Re,Fe=q(()=>{me();Ae=Z(Q(),1);Me();Oe();Le=Z(Q(),1),Ne=(e,r,n)=>{let s=(0,Ae.default)(),a=new Map,t=new Map,l=m=>{if(m.destination.context===e&&!m.destination.frameId&&!m.destination.tabId){n?.(m);let{transactionId:p,messageID:v,messageType:x}=m,T=()=>{let y=a.get(p);if(y){let{err:C,data:M}=m;if(C){let P=C,B=self[P.name],U=new(typeof B=="function"?B:Error)(P.message);for(let $ in P)U[$]=P[$];y.reject(U)}else y.resolve(M);a.delete(p)}},h=async()=>{let y,C,M=!1;try{let P=t.get(v);if(typeof P=="function")y=await P({sender:m.origin,id:v,data:m.data,timestamp:m.timestamp});else throw M=!0,new Error(`[webext-bridge] No handler registered in '${e}' to accept messages with id '${v}'`)}catch(P){C=P}finally{if(C&&(m.err=Pe(C)),l(G(F({},m),{messageType:"reply",data:y,origin:{context:e,tabId:null},destination:m.origin,hops:[]})),C&&!M)throw y}};switch(x){case"reply":return T();case"message":return h()}}return m.hops.push(`${e}::${s}`),r(m)};return{handleMessage:l,endTransaction:m=>{let p=a.get(m);p?.reject("Transaction was ended before it could complete"),a.delete(m)},sendMessage:(m,p,v="background")=>{let x=typeof v=="string"?H(v):v,T="Bridge#sendMessage ->";if(!x.context)throw new TypeError(`${T} Destination must be any one of known destinations`);return new Promise((h,y)=>{let C={messageID:m,data:p,destination:x,messageType:"message",transactionId:(0,Ae.default)(),origin:{context:e,tabId:null},hops:[],timestamp:Date.now()};a.set(C.transactionId,{resolve:h,reject:y});try{l(C)}catch(M){a.delete(C.transactionId),y(M)}})},onMessage:(m,p)=>(t.set(m,p),()=>t.delete(m))}},z=class{constructor(e,r){this.endpointRuntime=e,this.streamInfo=r,this.emitter=de(),this.isClosed=!1,this.handleStreamClose=()=>{this.isClosed||(this.isClosed=!0,this.emitter.emit("closed",!0),this.emitter.events={})},z.initDone||(e.onMessage("__crx_bridge_stream_transfer__",n=>{let{streamId:s,streamTransfer:a,action:t}=n.data,l=z.openStreams.get(s);l&&!l.isClosed&&(t==="transfer"&&l.emitter.emit("message",a),t==="close"&&(z.openStreams.delete(s),l.handleStreamClose()))}),z.initDone=!0),z.openStreams.set(this.streamInfo.streamId,this)}get info(){return this.streamInfo}send(e){if(this.isClosed)throw new Error("Attempting to send a message over closed stream. Use stream.onClose(<callback>) to keep an eye on stream status");this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:e,action:"transfer"},this.streamInfo.endpoint)}close(e){e&&this.send(e),this.handleStreamClose(),this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:null,action:"close"},this.streamInfo.endpoint)}onMessage(e){return this.getDisposable("message",e)}onClose(e){return this.getDisposable("closed",e)}getDisposable(e,r){let n=this.emitter.on(e,r);return Object.assign(n,{dispose:n,close:n})}},ee=z;ee.initDone=!1;ee.openStreams=new Map;Re=e=>{let r=new Map,n=new Map,s=de();e.onMessage("__crx_bridge_stream_open__",l=>new Promise(m=>{let{sender:p,data:v}=l,{channel:x}=v,T=!1,h=()=>{},y=()=>{let C=n.get(x);typeof C=="function"?(C(new ee(e,G(F({},v),{endpoint:p}))),T&&h(),m(!0)):T||(T=!0,h=s.on("did-change-stream-callbacks",y))};y()}));async function a(l,m){if(r.has(l))throw new Error("webext-bridge: A Stream is already open at this channel");let p=typeof m=="string"?H(m):m,v={streamId:(0,Le.default)(),channel:l,endpoint:p},x=new ee(e,v);return x.onClose(()=>r.delete(l)),await e.sendMessage("__crx_bridge_stream_open__",v,p),r.set(l,x),x}function t(l,m){if(n.has(l))throw new Error("webext-bridge: This channel has already been claimed. Stream allows only one-on-one communication");n.set(l,m),s.emit("did-change-stream-callbacks")}return{openStream:a,onOpenStreamChannel:t}}});var je=K((ue,$e)=>{(function(e,r){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],r);else if(typeof ue<"u")r($e);else{var n={exports:{}};r(n),e.browser=n.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ue,function(e){"use strict";if(typeof globalThis!="object"||typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let r="The message port closed before a response was received.",n="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",s=a=>{let t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(t).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class l extends WeakMap{constructor(g,u=void 0){super(u),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}let m=i=>i&&typeof i=="object"&&typeof i.then=="function",p=(i,g)=>(...u)=>{a.runtime.lastError?i.reject(new Error(a.runtime.lastError.message)):g.singleCallbackArg||u.length<=1&&g.singleCallbackArg!==!1?i.resolve(u[0]):i.resolve(u)},v=i=>i==1?"argument":"arguments",x=(i,g)=>function(w,...b){if(b.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${v(g.minArgs)} for ${i}(), got ${b.length}`);if(b.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${v(g.maxArgs)} for ${i}(), got ${b.length}`);return new Promise((f,_)=>{if(g.fallbackToNoCallback)try{w[i](...b,p({resolve:f,reject:_},g))}catch(c){console.warn(`${i} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,c),w[i](...b),g.fallbackToNoCallback=!1,g.noCallback=!0,f()}else g.noCallback?(w[i](...b),f()):w[i](...b,p({resolve:f,reject:_},g))})},T=(i,g,u)=>new Proxy(g,{apply(w,b,f){return u.call(b,i,...f)}}),h=Function.call.bind(Object.prototype.hasOwnProperty),y=(i,g={},u={})=>{let w=Object.create(null),b={has(_,c){return c in i||c in w},get(_,c,E){if(c in w)return w[c];if(!(c in i))return;let k=i[c];if(typeof k=="function")if(typeof g[c]=="function")k=T(i,i[c],g[c]);else if(h(u,c)){let I=x(c,u[c]);k=T(i,i[c],I)}else k=k.bind(i);else if(typeof k=="object"&&k!==null&&(h(g,c)||h(u,c)))k=y(k,g[c],u[c]);else if(h(u,"*"))k=y(k,g[c],u["*"]);else return Object.defineProperty(w,c,{configurable:!0,enumerable:!0,get(){return i[c]},set(I){i[c]=I}}),k;return w[c]=k,k},set(_,c,E,k){return c in w?w[c]=E:i[c]=E,!0},defineProperty(_,c,E){return Reflect.defineProperty(w,c,E)},deleteProperty(_,c){return Reflect.deleteProperty(w,c)}},f=Object.create(i);return new Proxy(f,b)},C=i=>({addListener(g,u,...w){g.addListener(i.get(u),...w)},hasListener(g,u){return g.hasListener(i.get(u))},removeListener(g,u){g.removeListener(i.get(u))}}),M=new l(i=>typeof i!="function"?i:function(u){let w=y(u,{},{getContent:{minArgs:0,maxArgs:0}});i(w)}),P=!1,B=new l(i=>typeof i!="function"?i:function(u,w,b){let f=!1,_,c=new Promise(j=>{_=function(R){P||(console.warn(n,new Error().stack),P=!0),f=!0,j(R)}}),E;try{E=i(u,w,_)}catch(j){E=Promise.reject(j)}let k=E!==!0&&m(E);if(E!==!0&&!k&&!f)return!1;let I=j=>{j.then(R=>{b(R)},R=>{let oe;R&&(R instanceof Error||typeof R.message=="string")?oe=R.message:oe="An unexpected error occurred",b({__mozWebExtensionPolyfillReject__:!0,message:oe})}).catch(R=>{console.error("Failed to send onMessage rejected reply",R)})};return I(k?E:c),!0}),U=({reject:i,resolve:g},u)=>{a.runtime.lastError?a.runtime.lastError.message===r?g():i(new Error(a.runtime.lastError.message)):u&&u.__mozWebExtensionPolyfillReject__?i(new Error(u.message)):g(u)},$=(i,g,u,...w)=>{if(w.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${v(g.minArgs)} for ${i}(), got ${w.length}`);if(w.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${v(g.maxArgs)} for ${i}(), got ${w.length}`);return new Promise((b,f)=>{let _=U.bind(null,{resolve:b,reject:f});w.push(_),u.sendMessage(...w)})},d={devtools:{network:{onRequestFinished:C(M)}},runtime:{onMessage:C(B),onMessageExternal:C(B),sendMessage:$.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:$.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},A={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":A},services:{"*":A},websites:{"*":A}},y(a,d,t)};e.exports=s(chrome)}else e.exports=globalThis.browser})});var De,X,O,V,re,Be,We,W,fr,ne,jr,te,Dr,Br,Ue=q(()=>{Ce();Fe();me();De=Z(je(),1),X=Te(),O=new Map,V=new Map,re=new Map,Be=(e,r)=>(V.set(e,(V.get(e)||new Set).add(r)),()=>{let n=V.get(e);n?.delete(r)&&n?.size===0&&V.delete(e)}),We=(e,r)=>{re.set(e,(re.get(e)||new Set).add(r))},W=e=>({withFingerprint:r=>{let n=a=>({and:()=>a}),s={aboutIncomingMessage:a=>{let t=O.get(e);return J.toExtensionContext(t.port,{status:"incoming",message:a}),n(s)},aboutSuccessfulDelivery:a=>{let t=O.get(e);return J.toExtensionContext(t.port,{status:"delivered",receipt:a}),n(s)},aboutMessageUndeliverability:(a,t)=>{let l=O.get(e);return l?.fingerprint===r&&J.toExtensionContext(l.port,{status:"undeliverable",resolvedDestination:a,message:t}),n(s)},whenDeliverableTo:a=>{let t=()=>{let l=O.get(e);if(l?.fingerprint===r&&O.has(a))return J.toExtensionContext(l.port,{status:"deliverable",deliverableTo:a}),!0};if(!t()){let l=Be(a,t);We(r,l)}return n(s)},aboutSessionEnded:a=>{let t=O.get(e);return t?.fingerprint===r&&J.toExtensionContext(t.port,{status:"terminated",fingerprint:a}),n(s)}};return s}}),fr=_e(),ne=Ne("background",e=>{var r;if(e.origin.context==="background"&&["content-script","devtools "].includes(e.destination.context)&&!e.destination.tabId)throw new TypeError("When sending messages from background page, use @tabId syntax to target specific tab");let n=Y(F(F({},e.origin),e.origin.context==="window"&&{context:"content-script"})),s=Y(G(F(F({},e.destination),e.destination.context==="window"&&{context:"content-script"}),{tabId:e.destination.tabId||e.origin.tabId}));e.destination.tabId=null,e.destination.frameId=null;let a=()=>O.get(s),t=()=>O.get(n),l=()=>{var m;W(s).withFingerprint(a().fingerprint).aboutIncomingMessage(e);let p={message:e,to:a().fingerprint,from:{endpointId:n,fingerprint:(m=t())==null?void 0:m.fingerprint}};e.messageType==="message"&&X.add(p),e.messageType==="reply"&&X.remove(e.messageID),t()&&W(n).withFingerprint(t().fingerprint).aboutSuccessfulDelivery(p)};(r=a())!=null&&r.port?l():e.messageType==="message"&&(e.origin.context==="background"?Be(s,l):t()&&W(n).withFingerprint(t().fingerprint).aboutMessageUndeliverability(s,e).and().whenDeliverableTo(s))},e=>{let r=Y(F(F({},e.origin),e.origin.context==="window"&&{context:"content-script"})),n=O.get(r),s={message:e,to:fr,from:{endpointId:r,fingerprint:n.fingerprint}};W(r).withFingerprint(n.fingerprint).aboutSuccessfulDelivery(s)});De.default.runtime.onConnect.addListener(e=>{var r;let n=ke(e.name);if(!n)return;n.endpointName||(n.endpointName=Y({context:"content-script",tabId:e.sender.tab.id,frameId:e.sender.frameId}));let{tabId:s,frameId:a}=H(n.endpointName);O.set(n.endpointName,{fingerprint:n.fingerprint,port:e}),(r=V.get(n.endpointName))==null||r.forEach(t=>t()),V.delete(n.endpointName),We(n.fingerprint,()=>{let t=X.entries().filter(l=>l.to===n.fingerprint);X.remove(t),t.forEach(l=>{l.from.endpointId==="background"?ne.endTransaction(l.message.transactionId):W(l.from.endpointId).withFingerprint(l.from.fingerprint).aboutSessionEnded(n.fingerprint)})}),e.onDisconnect.addListener(()=>{var t,l;((t=O.get(n.endpointName))==null?void 0:t.fingerprint)===n.fingerprint&&O.delete(n.endpointName),(l=re.get(n.fingerprint))==null||l.forEach(m=>m()),re.delete(n.fingerprint)}),e.onMessage.addListener(t=>{var l,m;if(t.type==="sync"){let p=[...O.values()].map(x=>x.fingerprint),v=t.pendingResponses.filter(x=>p.includes(x.to));X.add(...v),t.pendingResponses.filter(x=>!p.includes(x.to)).forEach(x=>W(n.endpointName).withFingerprint(n.fingerprint).aboutSessionEnded(x.to)),t.pendingDeliveries.forEach(x=>W(n.endpointName).withFingerprint(n.fingerprint).whenDeliverableTo(x));return}t.type==="deliver"&&((m=(l=t.message)==null?void 0:l.origin)!=null&&m.context)&&(t.message.origin.tabId=s,t.message.origin.frameId=a,ne.handleMessage(t.message))})});({sendMessage:jr,onMessage:te}=ne),{openStream:Dr,onOpenStreamChannel:Br}=Re(ne)});var yr=K(we=>{var o=Z(he());Ue();window.tabsActive=[];window.displayInfo=[];async function N(e){return(await o.default.storage.local.get(e))[e]}function D(e,r){return o.default.storage.local.set({[e]:r})}te("create_window_with_tabs",({data:{tabs:e}})=>Ye(e));async function Ye(e,r){for(var n=0,s=e.shift(),a=[],t=0;t<e.length;t++)a.push(e[t].id);var l=s.pinned,m=await o.default.windows.create({tabId:s.id,incognito:!!r});if(l&&(await o.default.tabs.update(m.tabs[0].id,{pinned:l}),n++),a.length>0){var t=0;for(var p of a){t++;var v=await o.default.tabs.get(p),x=v.pinned,T=[];if(x?T=await o.default.tabs.move(p,{windowId:m.id,index:n++}):T=await o.default.tabs.move(p,{windowId:m.id,index:-1}),T.length>0){var h=T[0];x&&await o.default.tabs.update(h.id,{pinned:x})}}}await o.default.windows.update(m.id,{focused:!0})}te("focus_on_tab_and_window",({data:{tab:e,isFirefox:r}})=>r?new Promise(n=>setTimeout(n,125)).then(se.bind(we,e)):se(e));async function se(e){var r=e.windowId,n;e.tabId?n=e.tabId:n=e.id,o.default.windows.update(r,{focused:!0}).then(function(s,a){o.default.tabs.update(s,{active:!0}).then(function(t,l){fe({tabId:t,windowId:l})}.bind(this,s,a))}.bind(this,n,r))}te("focus_on_window",({data:{windowId:e,isFirefox:r}})=>r?new Promise(n=>setTimeout(n,125)).then(qe.bind(we,e)):qe(e));function qe(e){return o.default.windows.update(e,{focused:!0})}async function pr(){var e=!0;if(typeof await N("badge")>"u"&&await D("badge","1"),await N("badge")=="0"&&(e=!1),e){var r=await o.default.tabs.query({}),n=0;r&&r.length&&(n=r.length),await o.default.action.setBadgeText({text:n+""}),await o.default.action.setBadgeBackgroundColor({color:"purple"});var s=[];if(window.tabsActive)for(var a=0;a<window.tabsActive.length;a++){var t=window.tabsActive[a],l=!1;if(r&&r.length)for(var m=0;m<r.length;m++)r[m].id==t.tabId&&(l=!0);l||s.push(a)}for(var a=s.length-1;a>=0;a--)window.tabsActive&&window.tabsActive.length>0&&window.tabsActive[s[a]]&&window.tabsActive.splice(s[a],1)}else await o.default.action.setBadgeText({text:""})}var ie=br(pr,250);function L(){ie()}async function Je(e){typeof await N("tabLimit")>"u"&&await D("tabLimit","0");try{var r=JSON.parse(await N("tabLimit"))}catch{var r=0}if(r>0&&e.id!=o.default.tabs.TAB_ID_NONE){var n=await o.default.tabs.query({currentWindow:!0});n.length>r&&await Ye([e],e.incognito)}ie()}function fe(e){if(e&&e.tabId){if(window.tabsActive||(window.tabsActive=[]),window.tabsActive&&window.tabsActive.length>0){var r=window.tabsActive[window.tabsActive.length-1];if(r&&r.tabId==e.tabId&&r.windowId==e.windowId)return}for(;window.tabsActive.length>20;)window.tabsActive.shift();for(var n=window.tabsActive.length-1;n>=0;n--)window.tabsActive[n].tabId==e.tabId&&window.tabsActive.splice(n,1);window.tabsActive.push(e)}ie()}async function wr(){await o.default.sidebarAction.open()}async function xr(){typeof await N("openInOwnTab")>"u"&&await D("openInOwnTab","0");var e=!1;try{e=!!JSON.parse(await N("openInOwnTab"))}catch{e=!1}e?(await o.default.action.setPopup({popup:"popup.html?popup=true"}),await o.default.action.openPopup(),await o.default.action.setPopup({popup:""})):await o.default.action.openPopup()}async function pe(){var e=o.default.runtime.getURL("popup.html"),r=await o.default.tabs.query({}),n,s;window.tabsActive&&window.tabsActive.length>1&&(n=window.tabsActive[window.tabsActive.length-1],s=window.tabsActive[window.tabsActive.length-2]);for(var a=0;a<r.length;a++){var t=r[a];if(t.url.indexOf("popup.html")>-1&&t.url.indexOf(e)>-1)return n&&n.tabId&&t.id==n.tabId&&s&&s.tabId?se(s):o.default.windows.update(t.windowId,{focused:!0}).then(function(){o.default.tabs.highlight({windowId:t.windowId,tabs:t.index})}.bind(this))}return o.default.tabs.create({url:"popup.html"})}async function Xe(){typeof await N("openInOwnTab")>"u"&&await D("openInOwnTab","0");var e=!1;try{e=!!JSON.parse(await N("openInOwnTab"))}catch{e=!1}console.log(e),await o.default.action.onClicked.removeListener(pe),e?(await o.default.action.setPopup({popup:""}),await o.default.action.onClicked.addListener(pe)):await o.default.action.setPopup({popup:"popup.html?popup=true"}),o.default.sidebarAction&&o.default.sidebarAction.setPanel({panel:"popup.html?panel=true"})}var S=[];S.push({title:"\u{1F4D4} Open in own tab",id:"open_in_own_tab",contexts:["browser_action"],onclick:pe});o.default.action.openPopup&&S.push({title:"\u{1F4D1} Open popup",id:"open_popup",contexts:["browser_action"],onclick:xr});o.default.sidebarAction&&S.push({title:"\u{1F5C2} Open sidebar",id:"open_sidebar",contexts:["browser_action"],onclick:wr});S.push({type:"separator",id:"sep_1",contexts:["browser_action"]});S.push({title:"\u{1F60D} Support this extension",id:"support_menu",contexts:["browser_action"]});S.push({title:"\u2B50 Leave a review",contexts:["browser_action"],id:"leave_a_review",parentId:"support_menu",onclick:function(r,n){navigator.userAgent.search("Firefox")>-1?o.default.tabs.create({url:"https://addons.mozilla.org/en-US/firefox/addon/tab-manager-plus-for-firefox/"}):o.default.tabs.create({url:"https://chrome.google.com/webstore/detail/tab-manager-plus-for-chro/cnkdjjdmfiffagllbiiilooaoofcoeff"})}});S.push({title:"\u2615 Donate to keep Extensions Alive",contexts:["browser_action"],id:"donate",parentId:"support_menu",onclick:function(r,n){o.default.tabs.create({url:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=67TZLSEGYQFFW"})}});S.push({title:"\u{1F4B0} Become a Patron",contexts:["browser_action"],id:"patron",parentId:"support_menu",onclick:function(r,n){o.default.tabs.create({url:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=67TZLSEGYQFFW"})}});S.push({title:"\u{1F426} Follow on Twitter",contexts:["browser_action"],id:"follow_x",parentId:"support_menu",onclick:function(r,n){o.default.tabs.create({url:"https://www.twitter.com/mastef"})}});S.push({title:"\u{1F914} Issues and Suggestions",id:"code_menu",contexts:["browser_action"]});S.push({title:"\u{1F195} View recent changes",contexts:["browser_action"],id:"view_changes",parentId:"code_menu",onclick:function(r,n){o.default.tabs.create({url:"changelog.html"})}});S.push({title:"\u2699 Edit Options",contexts:["browser_action"],id:"edit_options",parentId:"code_menu",onclick:function(r,n){o.default.tabs.create({url:"options.html"})}});S.push({title:"\u{1F4BB} View source code",contexts:["browser_action"],id:"view_source",parentId:"code_menu",onclick:function(r,n){o.default.tabs.create({url:"https://github.com/stefanXO/Tab-Manager-Plus"})}});S.push({title:"\u{1F914} Report an issue",contexts:["browser_action"],id:"report",parentId:"code_menu",onclick:function(r,n){o.default.tabs.create({url:"https://github.com/stefanXO/Tab-Manager-Plus/issues"})}});S.push({title:"\u{1F4A1} Send a suggestion",contexts:["browser_action"],id:"send_sugg",parentId:"code_menu",onclick:function(r,n){o.default.tabs.create({url:"https://github.com/stefanXO/Tab-Manager-Plus/issues"}),o.default.tabs.create({url:"mailto:markus+tmp@stefanxo.com"})}});async function Ke(){await o.default.contextMenus.removeAll();for(let e of S){let r={...e};delete r.onclick,r.contexts=["browser_action","action"],await o.default.contextMenus.create(r)}o.default.contextMenus.onClicked.removeListener(ze),o.default.contextMenus.onClicked.addListener(ze),Xe(),o.default.tabs.onCreated.removeListener(Je),o.default.tabs.onUpdated.removeListener(L),o.default.tabs.onRemoved.removeListener(L),o.default.tabs.onReplaced.removeListener(L),o.default.tabs.onDetached.removeListener(L),o.default.tabs.onAttached.removeListener(L),o.default.tabs.onActivated.removeListener(fe),o.default.tabs.onMoved.removeListener(L),o.default.windows.onFocusChanged.removeListener(Ve),o.default.windows.onCreated.removeListener(Ze),o.default.windows.onRemoved.removeListener(Ge),o.default.tabs.onCreated.addListener(Je),o.default.tabs.onUpdated.addListener(L),o.default.tabs.onRemoved.addListener(L),o.default.tabs.onReplaced.addListener(L),o.default.tabs.onDetached.addListener(L),o.default.tabs.onAttached.addListener(L),o.default.tabs.onActivated.addListener(fe),o.default.tabs.onMoved.addListener(L),o.default.windows.onFocusChanged.addListener(Ve),o.default.windows.onCreated.addListener(Ze),o.default.windows.onRemoved.addListener(Ge),ie(),setTimeout(vr,5e3)}function ze(e,r){let n=S.find(s=>s.id===e.menuItemId)?.onclick;n?.(e,r)}function br(e,r,n){var s;return function(){var a=this,t=arguments,l=function(){s=null,n||e.apply(a,t)},m=n&&!s;clearTimeout(s),s=setTimeout(l,r),m&&e.apply(a,t)}}async function Ve(e){try{e&&(await ae(e),hr(e))}catch{}}function Ze(e){try{e&&e.id&&ae(e.id)}catch{}}function Ge(e){try{e&&ae(e)}catch{}}async function hr(e){if(!(navigator.userAgent.search("Firefox")>-1)&&!(!e||e<0)){if(typeof await N("hideWindows")>"u"&&await D("hideWindows","0"),await N("hideWindows")=="0")return;var r=await o.default.permissions.contains({permissions:["system.display"]});r&&chrome.system.display.getInfo(async function(n,s){window.displayInfo=[];var a=!0,t=!1,l=void 0;try{for(var m=s[Symbol.iterator](),p;!(a=(p=m.next()).done);a=!0){var v=p.value;window.displayInfo.push(v.bounds)}}catch(M){t=!0,l=M}finally{try{!a&&m.return&&m.return()}finally{if(t)throw l}}for(var x=await o.default.windows.getAll({populate:!0}),T=-1,h=x.length-1;h>=0;h--)if(x[h].id==n)for(var y in window.displayInfo){var C=He(x[h],window.displayInfo[y]);C&&(T=y)}for(var h=x.length-1;h>=0;h--)x[h].id!=n&&He(x[h],window.displayInfo[T])&&await o.default.windows.update(x[h].id,{state:"minimized"})}.bind(null,e))}}function He(e,r){var n=e,s=r;return n.left>=s.left&&n.left<=s.left+s.width&&n.top>=s.top&&n.top<=s.top+s.height}async function ae(e){if(!(e<0)){var r=JSON.parse(await N("windowAge"));r instanceof Array||(r=[]),r.indexOf(e)>-1&&r.splice(r.indexOf(e),1),r.unshift(e),await D("windowAge",JSON.stringify(r))}}o.default.commands.onCommand.addListener(function(e){e=="switch_to_previous_active_tab"&&window.tabsActive&&window.tabsActive.length>1&&se(window.tabsActive[window.tabsActive.length-2])});o.default.runtime.onMessage.addListener(function(e,r,n){e.command=="reload_popup_controls"&&Xe()});(async function(){var e=await o.default.windows.getAll({populate:!0});if(await D("windowAge",JSON.stringify([])),e&&e.length>0){e.sort(function(n,s){return n.id<s.id?1:n.id>s.id?-1:0});for(var r=0;r<e.length;r++)e[r].id&&await ae(e[r].id)}})();async function vr(){var e=await o.default.windows.getAll({populate:!0}),r=[];for(var n of e)r.push(n.id);var s=JSON.parse(await N("windowAge"));s instanceof Array||(s=[]);for(var a=s.length-1;a>=0;a--)r.indexOf(s[a])<0&&s.splice(a,1);await D("windowAge",JSON.stringify(s));var t=await N("windowNames");t?t=JSON.parse(t):t={};for(var l of Object.keys(t))r.indexOf(parseInt(l))<0&&delete t[l];await D("windowNames",JSON.stringify(t))}setInterval(Ke,3e5);Ke()});yr();})();
