(typeof self.window === 'undefined' ? self.window = self : void 0);
(()=>{var nr=Object.create;var he=Object.defineProperty;var tr=Object.getOwnPropertyDescriptor;var sr=Object.getOwnPropertyNames;var ir=Object.getPrototypeOf,or=Object.prototype.hasOwnProperty;var W=(e,r)=>()=>(e&&(r=e(e=0)),r);var Q=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var ar=(e,r,n,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of sr(r))!or.call(e,o)&&o!==n&&he(e,o,{get:()=>r[o],enumerable:!(t=tr(r,o))||t.enumerable});return e};var z=(e,r,n)=>(n=e!=null?nr(ir(e)):{},ar(r||!e||!e.__esModule?he(n,"default",{value:e,enumerable:!0}):n,e));var me=Q((ge,ve)=>{(function(e,r){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],r);else if(typeof ge<"u")r(ve);else{var n={exports:{}};r(n),e.browser=n.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ge,function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{let r="The message port closed before a response was received.",n=t=>{let o={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(o).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(A,s=void 0){super(s),this.createItem=A}get(A){return this.has(A)||this.set(A,this.createItem(A)),super.get(A)}}let m=d=>d&&typeof d=="object"&&typeof d.then=="function",l=(d,A)=>(...s)=>{t.runtime.lastError?d.reject(new Error(t.runtime.lastError.message)):A.singleCallbackArg||s.length<=1&&A.singleCallbackArg!==!1?d.resolve(s[0]):d.resolve(s)},p=d=>d==1?"argument":"arguments",v=(d,A)=>function(g,...u){if(u.length<A.minArgs)throw new Error(`Expected at least ${A.minArgs} ${p(A.minArgs)} for ${d}(), got ${u.length}`);if(u.length>A.maxArgs)throw new Error(`Expected at most ${A.maxArgs} ${p(A.maxArgs)} for ${d}(), got ${u.length}`);return new Promise((x,b)=>{if(A.fallbackToNoCallback)try{g[d](...u,l({resolve:x,reject:b},A))}catch(f){console.warn(`${d} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,f),g[d](...u),A.fallbackToNoCallback=!1,A.noCallback=!0,x()}else A.noCallback?(g[d](...u),x()):g[d](...u,l({resolve:x,reject:b},A))})},w=(d,A,s)=>new Proxy(A,{apply(g,u,x){return s.call(u,d,...x)}}),C=Function.call.bind(Object.prototype.hasOwnProperty),h=(d,A={},s={})=>{let g=Object.create(null),u={has(b,f){return f in d||f in g},get(b,f,_){if(f in g)return g[f];if(!(f in d))return;let c=d[f];if(typeof c=="function")if(typeof A[f]=="function")c=w(d,d[f],A[f]);else if(C(s,f)){let E=v(f,s[f]);c=w(d,d[f],E)}else c=c.bind(d);else if(typeof c=="object"&&c!==null&&(C(A,f)||C(s,f)))c=h(c,A[f],s[f]);else if(C(s,"*"))c=h(c,A[f],s["*"]);else return Object.defineProperty(g,f,{configurable:!0,enumerable:!0,get(){return d[f]},set(E){d[f]=E}}),c;return g[f]=c,c},set(b,f,_,c){return f in g?g[f]=_:d[f]=_,!0},defineProperty(b,f,_){return Reflect.defineProperty(g,f,_)},deleteProperty(b,f){return Reflect.deleteProperty(g,f)}},x=Object.create(d);return new Proxy(x,u)},y=d=>({addListener(A,s,...g){A.addListener(d.get(s),...g)},hasListener(A,s){return A.hasListener(d.get(s))},removeListener(A,s){A.removeListener(d.get(s))}}),T=new i(d=>typeof d!="function"?d:function(s){let g=h(s,{},{getContent:{minArgs:0,maxArgs:0}});d(g)}),M=new i(d=>typeof d!="function"?d:function(s,g,u){let x=!1,b,f=new Promise(k=>{b=function(I){x=!0,k(I)}}),_;try{_=d(s,g,b)}catch(k){_=Promise.reject(k)}let c=_!==!0&&m(_);if(_!==!0&&!c&&!x)return!1;let E=k=>{k.then(I=>{u(I)},I=>{let j;I&&(I instanceof Error||typeof I.message=="string")?j=I.message:j="An unexpected error occurred",u({__mozWebExtensionPolyfillReject__:!0,message:j})}).catch(I=>{console.error("Failed to send onMessage rejected reply",I)})};return E(c?_:f),!0}),P=({reject:d,resolve:A},s)=>{t.runtime.lastError?t.runtime.lastError.message===r?A():d(new Error(t.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?d(new Error(s.message)):A(s)},D=(d,A,s,...g)=>{if(g.length<A.minArgs)throw new Error(`Expected at least ${A.minArgs} ${p(A.minArgs)} for ${d}(), got ${g.length}`);if(g.length>A.maxArgs)throw new Error(`Expected at most ${A.maxArgs} ${p(A.maxArgs)} for ${d}(), got ${g.length}`);return new Promise((u,x)=>{let b=P.bind(null,{resolve:u,reject:x});g.push(b),s.sendMessage(...g)})},q={devtools:{network:{onRequestFinished:y(T)}},runtime:{onMessage:y(M),onMessageExternal:y(M),sendMessage:D.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:D.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},$={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return o.privacy={network:{"*":$},services:{"*":$},websites:{"*":$}},h(t,q,o)};e.exports=n(chrome)}})});var ee=Q((Tr,le)=>{var gr=e=>typeof crypto<"u"&&typeof crypto.getRandomValues=="function"?()=>{let r=crypto.getRandomValues(new Uint8Array(1))[0];return(r>=e?r%e:r).toString(e)}:()=>Math.floor(Math.random()*e).toString(e),ye=(e=7,r=!1)=>Array.from({length:e},gr(r?16:36)).join("");le.exports=ye;le.exports.default=ye});var _e,ke,mr,Ce,Te,V,Ee=W(()=>{_e=z(ee(),1),ke=()=>`uid::${(0,_e.default)(7)}`,mr=(e,r=["endpointName","fingerprint"])=>typeof e=="object"&&e!==null&&r.every(n=>n in e),Ce=e=>{try{let r=JSON.parse(e);return mr(r)?r:null}catch{return null}},Te=()=>{let e=[];return{add:(...r)=>{e=[...e,...r]},remove:r=>{e=typeof r=="string"?e.filter(n=>n.message.transactionId!==r):e.filter(n=>!r.includes(n))},entries:()=>e}},V=class{static toBackground(e,r){return e.postMessage(r)}static toExtensionContext(e,r){return e.postMessage(r)}}});var lr,cr,dr,Ie,Ar,ur,Se,F,H,fr,Y,X,ce=W(()=>{lr=Object.defineProperty,cr=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,Ar=Object.prototype.hasOwnProperty,ur=Object.prototype.propertyIsEnumerable,Se=(e,r,n)=>r in e?lr(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,F=(e,r)=>{for(var n in r||(r={}))Ar.call(r,n)&&Se(e,n,r[n]);if(Ie)for(var n of Ie(r))ur.call(r,n)&&Se(e,n,r[n]);return e},H=(e,r)=>cr(e,dr(r)),fr=/^((?:background$)|devtools|popup|options|content-script|window)(?:@(\d+)(?:\.(\d+))?)?$/,Y=e=>{let[,r,n,t]=e.match(fr)||[];return{context:r,tabId:+n,frameId:t?+t:void 0}},X=({context:e,tabId:r,frameId:n})=>["background","popup","options"].includes(e)?e:`${e}@${r}${n?`.${n}`:""}`});function Me(e,r={}){let{maxDepth:n=Number.POSITIVE_INFINITY}=r;return typeof e=="object"&&e!==null?Pe({from:e,seen:[],forceEnumerable:!0,maxDepth:n,depth:0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}var pr,de,xr,Pe,Oe=W(()=>{pr=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],de=Symbol(".toJSON was called"),xr=e=>{e[de]=!0;let r=e.toJSON();return delete e[de],r},Pe=({from:e,seen:r,to_:n,forceEnumerable:t,maxDepth:o,depth:i})=>{let m=n||(Array.isArray(e)?[]:{});if(r.push(e),i>=o)return m;if(typeof e.toJSON=="function"&&e[de]!==!0)return xr(e);for(let[l,p]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(p)){m[l]="[object Buffer]";continue}if(p!==null&&typeof p=="object"&&typeof p.pipe=="function"){m[l]="[object Stream]";continue}if(typeof p!="function"){if(!p||typeof p!="object"){m[l]=p;continue}if(!r.includes(e[l])){i++,m[l]=Pe({from:e[l],seen:[...r],forceEnumerable:t,maxDepth:o,depth:i});continue}m[l]="[Circular]"}}for(let{property:l,enumerable:p}of pr)typeof e[l]=="string"&&Object.defineProperty(m,l,{value:e[l],enumerable:t?!0:p,configurable:!0,writable:!0});return m}});var Ae,Ne=W(()=>{Ae=()=>({events:{},emit(e,...r){(this.events[e]||[]).forEach(n=>n(...r))},on(e,r){return(this.events[e]=this.events[e]||[]).push(r),()=>this.events[e]=(this.events[e]||[]).filter(n=>n!==r)}})});var ue,Re,Le,Z,re,Fe,$e=W(()=>{ce();ue=z(ee(),1);Oe();Ne();Re=z(ee(),1),Le=(e,r,n)=>{let t=(0,ue.default)(),o=new Map,i=new Map,m=l=>{if(l.destination.context===e&&!l.destination.frameId&&!l.destination.tabId){n?.(l);let{transactionId:p,messageID:v,messageType:w}=l,C=()=>{let y=o.get(p);if(y){let{err:T,data:M}=l;if(T){let P=T,D=self[P.name],q=new(typeof D=="function"?D:Error)(P.message);for(let $ in P)q[$]=P[$];y.reject(q)}else y.resolve(M);o.delete(p)}},h=async()=>{let y,T,M=!1;try{let P=i.get(v);if(typeof P=="function")y=await P({sender:l.origin,id:v,data:l.data,timestamp:l.timestamp});else throw M=!0,new Error(`[webext-bridge] No handler registered in '${e}' to accept messages with id '${v}'`)}catch(P){T=P}finally{if(T&&(l.err=Me(T)),m(H(F({},l),{messageType:"reply",data:y,origin:{context:e,tabId:null},destination:l.origin,hops:[]})),T&&!M)throw y}};switch(w){case"reply":return C();case"message":return h()}}return l.hops.push(`${e}::${t}`),r(l)};return{handleMessage:m,endTransaction:l=>{let p=o.get(l);p?.reject("Transaction was ended before it could complete"),o.delete(l)},sendMessage:(l,p,v="background")=>{let w=typeof v=="string"?Y(v):v,C="Bridge#sendMessage ->";if(!w.context)throw new TypeError(`${C} Destination must be any one of known destinations`);return new Promise((h,y)=>{let T={messageID:l,data:p,destination:w,messageType:"message",transactionId:(0,ue.default)(),origin:{context:e,tabId:null},hops:[],timestamp:Date.now()};o.set(T.transactionId,{resolve:h,reject:y});try{m(T)}catch(M){o.delete(T.transactionId),y(M)}})},onMessage:(l,p)=>(i.set(l,p),()=>i.delete(l))}},Z=class{constructor(e,r){this.endpointRuntime=e,this.streamInfo=r,this.emitter=Ae(),this.isClosed=!1,this.handleStreamClose=()=>{this.isClosed||(this.isClosed=!0,this.emitter.emit("closed",!0),this.emitter.events={})},Z.initDone||(e.onMessage("__crx_bridge_stream_transfer__",n=>{let{streamId:t,streamTransfer:o,action:i}=n.data,m=Z.openStreams.get(t);m&&!m.isClosed&&(i==="transfer"&&m.emitter.emit("message",o),i==="close"&&(Z.openStreams.delete(t),m.handleStreamClose()))}),Z.initDone=!0),Z.openStreams.set(this.streamInfo.streamId,this)}get info(){return this.streamInfo}send(e){if(this.isClosed)throw new Error("Attempting to send a message over closed stream. Use stream.onClose(<callback>) to keep an eye on stream status");this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:e,action:"transfer"},this.streamInfo.endpoint)}close(e){e&&this.send(e),this.handleStreamClose(),this.endpointRuntime.sendMessage("__crx_bridge_stream_transfer__",{streamId:this.streamInfo.streamId,streamTransfer:null,action:"close"},this.streamInfo.endpoint)}onMessage(e){return this.getDisposable("message",e)}onClose(e){return this.getDisposable("closed",e)}getDisposable(e,r){let n=this.emitter.on(e,r);return Object.assign(n,{dispose:n,close:n})}},re=Z;re.initDone=!1;re.openStreams=new Map;Fe=e=>{let r=new Map,n=new Map,t=Ae();e.onMessage("__crx_bridge_stream_open__",m=>new Promise(l=>{let{sender:p,data:v}=m,{channel:w}=v,C=!1,h=()=>{},y=()=>{let T=n.get(w);typeof T=="function"?(T(new re(e,H(F({},v),{endpoint:p}))),C&&h(),l(!0)):C||(C=!0,h=t.on("did-change-stream-callbacks",y))};y()}));async function o(m,l){if(r.has(m))throw new Error("webext-bridge: A Stream is already open at this channel");let p=typeof l=="string"?Y(l):l,v={streamId:(0,Re.default)(),channel:m,endpoint:p},w=new re(e,v);return w.onClose(()=>r.delete(m)),await e.sendMessage("__crx_bridge_stream_open__",v,p),r.set(m,w),w}function i(m,l){if(n.has(m))throw new Error("webext-bridge: This channel has already been claimed. Stream allows only one-on-one communication");n.set(m,l),t.emit("did-change-stream-callbacks")}return{openStream:o,onOpenStreamChannel:i}}});var De=Q((fe,je)=>{(function(e,r){if(typeof define=="function"&&define.amd)define("webextension-polyfill",["module"],r);else if(typeof fe<"u")r(je);else{var n={exports:{}};r(n),e.browser=n.exports}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:fe,function(e){"use strict";if(typeof globalThis!="object"||typeof chrome!="object"||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){let r="The message port closed before a response was received.",n="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",t=o=>{let i={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(i).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class m extends WeakMap{constructor(g,u=void 0){super(u),this.createItem=g}get(g){return this.has(g)||this.set(g,this.createItem(g)),super.get(g)}}let l=s=>s&&typeof s=="object"&&typeof s.then=="function",p=(s,g)=>(...u)=>{o.runtime.lastError?s.reject(new Error(o.runtime.lastError.message)):g.singleCallbackArg||u.length<=1&&g.singleCallbackArg!==!1?s.resolve(u[0]):s.resolve(u)},v=s=>s==1?"argument":"arguments",w=(s,g)=>function(x,...b){if(b.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${v(g.minArgs)} for ${s}(), got ${b.length}`);if(b.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${v(g.maxArgs)} for ${s}(), got ${b.length}`);return new Promise((f,_)=>{if(g.fallbackToNoCallback)try{x[s](...b,p({resolve:f,reject:_},g))}catch(c){console.warn(`${s} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,c),x[s](...b),g.fallbackToNoCallback=!1,g.noCallback=!0,f()}else g.noCallback?(x[s](...b),f()):x[s](...b,p({resolve:f,reject:_},g))})},C=(s,g,u)=>new Proxy(g,{apply(x,b,f){return u.call(b,s,...f)}}),h=Function.call.bind(Object.prototype.hasOwnProperty),y=(s,g={},u={})=>{let x=Object.create(null),b={has(_,c){return c in s||c in x},get(_,c,E){if(c in x)return x[c];if(!(c in s))return;let k=s[c];if(typeof k=="function")if(typeof g[c]=="function")k=C(s,s[c],g[c]);else if(h(u,c)){let I=w(c,u[c]);k=C(s,s[c],I)}else k=k.bind(s);else if(typeof k=="object"&&k!==null&&(h(g,c)||h(u,c)))k=y(k,g[c],u[c]);else if(h(u,"*"))k=y(k,g[c],u["*"]);else return Object.defineProperty(x,c,{configurable:!0,enumerable:!0,get(){return s[c]},set(I){s[c]=I}}),k;return x[c]=k,k},set(_,c,E,k){return c in x?x[c]=E:s[c]=E,!0},defineProperty(_,c,E){return Reflect.defineProperty(x,c,E)},deleteProperty(_,c){return Reflect.deleteProperty(x,c)}},f=Object.create(s);return new Proxy(f,b)},T=s=>({addListener(g,u,...x){g.addListener(s.get(u),...x)},hasListener(g,u){return g.hasListener(s.get(u))},removeListener(g,u){g.removeListener(s.get(u))}}),M=new m(s=>typeof s!="function"?s:function(u){let x=y(u,{},{getContent:{minArgs:0,maxArgs:0}});s(x)}),P=!1,D=new m(s=>typeof s!="function"?s:function(u,x,b){let f=!1,_,c=new Promise(j=>{_=function(R){P||(console.warn(n,new Error().stack),P=!0),f=!0,j(R)}}),E;try{E=s(u,x,_)}catch(j){E=Promise.reject(j)}let k=E!==!0&&l(E);if(E!==!0&&!k&&!f)return!1;let I=j=>{j.then(R=>{b(R)},R=>{let ae;R&&(R instanceof Error||typeof R.message=="string")?ae=R.message:ae="An unexpected error occurred",b({__mozWebExtensionPolyfillReject__:!0,message:ae})}).catch(R=>{console.error("Failed to send onMessage rejected reply",R)})};return I(k?E:c),!0}),q=({reject:s,resolve:g},u)=>{o.runtime.lastError?o.runtime.lastError.message===r?g():s(new Error(o.runtime.lastError.message)):u&&u.__mozWebExtensionPolyfillReject__?s(new Error(u.message)):g(u)},$=(s,g,u,...x)=>{if(x.length<g.minArgs)throw new Error(`Expected at least ${g.minArgs} ${v(g.minArgs)} for ${s}(), got ${x.length}`);if(x.length>g.maxArgs)throw new Error(`Expected at most ${g.maxArgs} ${v(g.maxArgs)} for ${s}(), got ${x.length}`);return new Promise((b,f)=>{let _=q.bind(null,{resolve:b,reject:f});x.push(_),u.sendMessage(...x)})},d={devtools:{network:{onRequestFinished:T(M)}},runtime:{onMessage:T(D),onMessageExternal:T(D),sendMessage:$.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:$.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},A={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return i.privacy={network:{"*":A},services:{"*":A},websites:{"*":A}},y(o,d,i)};e.exports=t(chrome)}else e.exports=globalThis.browser})});var Be,K,O,J,ne,We,Ue,U,wr,te,Br,G,Wr,Ur,qe=W(()=>{Ee();$e();ce();Be=z(De(),1),K=Te(),O=new Map,J=new Map,ne=new Map,We=(e,r)=>(J.set(e,(J.get(e)||new Set).add(r)),()=>{let n=J.get(e);n?.delete(r)&&n?.size===0&&J.delete(e)}),Ue=(e,r)=>{ne.set(e,(ne.get(e)||new Set).add(r))},U=e=>({withFingerprint:r=>{let n=o=>({and:()=>o}),t={aboutIncomingMessage:o=>{let i=O.get(e);return V.toExtensionContext(i.port,{status:"incoming",message:o}),n(t)},aboutSuccessfulDelivery:o=>{let i=O.get(e);return V.toExtensionContext(i.port,{status:"delivered",receipt:o}),n(t)},aboutMessageUndeliverability:(o,i)=>{let m=O.get(e);return m?.fingerprint===r&&V.toExtensionContext(m.port,{status:"undeliverable",resolvedDestination:o,message:i}),n(t)},whenDeliverableTo:o=>{let i=()=>{let m=O.get(e);if(m?.fingerprint===r&&O.has(o))return V.toExtensionContext(m.port,{status:"deliverable",deliverableTo:o}),!0};if(!i()){let m=We(o,i);Ue(r,m)}return n(t)},aboutSessionEnded:o=>{let i=O.get(e);return i?.fingerprint===r&&V.toExtensionContext(i.port,{status:"terminated",fingerprint:o}),n(t)}};return t}}),wr=ke(),te=Le("background",e=>{var r;if(e.origin.context==="background"&&["content-script","devtools "].includes(e.destination.context)&&!e.destination.tabId)throw new TypeError("When sending messages from background page, use @tabId syntax to target specific tab");let n=X(F(F({},e.origin),e.origin.context==="window"&&{context:"content-script"})),t=X(H(F(F({},e.destination),e.destination.context==="window"&&{context:"content-script"}),{tabId:e.destination.tabId||e.origin.tabId}));e.destination.tabId=null,e.destination.frameId=null;let o=()=>O.get(t),i=()=>O.get(n),m=()=>{var l;U(t).withFingerprint(o().fingerprint).aboutIncomingMessage(e);let p={message:e,to:o().fingerprint,from:{endpointId:n,fingerprint:(l=i())==null?void 0:l.fingerprint}};e.messageType==="message"&&K.add(p),e.messageType==="reply"&&K.remove(e.messageID),i()&&U(n).withFingerprint(i().fingerprint).aboutSuccessfulDelivery(p)};(r=o())!=null&&r.port?m():e.messageType==="message"&&(e.origin.context==="background"?We(t,m):i()&&U(n).withFingerprint(i().fingerprint).aboutMessageUndeliverability(t,e).and().whenDeliverableTo(t))},e=>{let r=X(F(F({},e.origin),e.origin.context==="window"&&{context:"content-script"})),n=O.get(r),t={message:e,to:wr,from:{endpointId:r,fingerprint:n.fingerprint}};U(r).withFingerprint(n.fingerprint).aboutSuccessfulDelivery(t)});Be.default.runtime.onConnect.addListener(e=>{var r;let n=Ce(e.name);if(!n)return;n.endpointName||(n.endpointName=X({context:"content-script",tabId:e.sender.tab.id,frameId:e.sender.frameId}));let{tabId:t,frameId:o}=Y(n.endpointName);O.set(n.endpointName,{fingerprint:n.fingerprint,port:e}),(r=J.get(n.endpointName))==null||r.forEach(i=>i()),J.delete(n.endpointName),Ue(n.fingerprint,()=>{let i=K.entries().filter(m=>m.to===n.fingerprint);K.remove(i),i.forEach(m=>{m.from.endpointId==="background"?te.endTransaction(m.message.transactionId):U(m.from.endpointId).withFingerprint(m.from.fingerprint).aboutSessionEnded(n.fingerprint)})}),e.onDisconnect.addListener(()=>{var i,m;((i=O.get(n.endpointName))==null?void 0:i.fingerprint)===n.fingerprint&&O.delete(n.endpointName),(m=ne.get(n.fingerprint))==null||m.forEach(l=>l()),ne.delete(n.fingerprint)}),e.onMessage.addListener(i=>{var m,l;if(i.type==="sync"){let p=[...O.values()].map(w=>w.fingerprint),v=i.pendingResponses.filter(w=>p.includes(w.to));K.add(...v),i.pendingResponses.filter(w=>!p.includes(w.to)).forEach(w=>U(n.endpointName).withFingerprint(n.fingerprint).aboutSessionEnded(w.to)),i.pendingDeliveries.forEach(w=>U(n.endpointName).withFingerprint(n.fingerprint).whenDeliverableTo(w));return}i.type==="deliver"&&((l=(m=i.message)==null?void 0:m.origin)!=null&&l.context)&&(i.message.origin.tabId=t,i.message.origin.frameId=o,te.handleMessage(i.message))})});({sendMessage:Br,onMessage:G}=te),{openStream:Wr,onOpenStreamChannel:Ur}=Fe(te)});async function N(e){return(await pe.default.storage.local.get(e))[e]}function B(e,r){return pe.default.storage.local.set({[e]:r})}var pe,ze=W(()=>{pe=z(me())});var kr=Q(be=>{var a=z(me());qe();ze();window.tabsActive=[];window.displayInfo=[];G("create_window_with_tabs",({data:{tabs:e}})=>Ke(e));async function Ke(e,r){for(var n=0,t=e.shift(),o=[],i=0;i<e.length;i++)o.push(e[i].id);var m=t.pinned,l=await a.default.windows.create({tabId:t.id,incognito:!!r});if(m&&(await a.default.tabs.update(l.tabs[0].id,{pinned:m}),n++),o.length>0){var i=0;for(var p of o){i++;var v=await a.default.tabs.get(p),w=v.pinned,C=[];if(w?C=await a.default.tabs.move(p,{windowId:l.id,index:n++}):C=await a.default.tabs.move(p,{windowId:l.id,index:-1}),C.length>0){var h=C[0];w&&await a.default.tabs.update(h.id,{pinned:w})}}}await a.default.windows.update(l.id,{focused:!0})}G("focus_on_tab_and_window",({data:{tab:e,isFirefox:r}})=>r?new Promise(n=>setTimeout(n,125)).then(se.bind(be,e)):se(e));async function se(e){var r=e.windowId,n;e.tabId?n=e.tabId:n=e.id,a.default.windows.update(r,{focused:!0}).then(function(t,o){a.default.tabs.update(t,{active:!0}).then(function(i,m){xe({tabId:i,windowId:m})}.bind(this,t,o))}.bind(this,n,r))}G("focus_on_window",({data:{windowId:e,isFirefox:r}})=>r?new Promise(n=>setTimeout(n,125)).then(Ve.bind(be,e)):Ve(e));function Ve(e){return a.default.windows.update(e,{focused:!0})}G("update_tab_count",Qe);async function Qe(){var e=!0;if(typeof await N("badge")>"u"&&await B("badge",1),await N("badge")===0&&(e=!1),e){var r=await a.default.tabs.query({}),n=0;r&&r.length&&(n=r.length),await a.default.action.setBadgeText({text:n+""}),await a.default.action.setBadgeBackgroundColor({color:"purple"});var t=[];if(window.tabsActive)for(var o=0;o<window.tabsActive.length;o++){var i=window.tabsActive[o],m=!1;if(r&&r.length)for(var l=0;l<r.length;l++)r[l].id==i.tabId&&(m=!0);m||t.push(o)}for(var o=t.length-1;o>=0;o--)window.tabsActive&&window.tabsActive.length>0&&window.tabsActive[t[o]]&&window.tabsActive.splice(t[o],1)}else await a.default.action.setBadgeText({text:""})}var ie=vr(Qe,250);function L(){ie()}async function Ze(e){typeof await N("tabLimit")>"u"&&await B("tabLimit",0);try{var r=await N("tabLimit")}catch{var r=0}if(r>0&&e.id!=a.default.tabs.TAB_ID_NONE){var n=await a.default.tabs.query({currentWindow:!0});n.length>r&&await Ke([e],e.incognito)}ie()}function xe(e){if(e&&e.tabId){if(window.tabsActive||(window.tabsActive=[]),window.tabsActive&&window.tabsActive.length>0){var r=window.tabsActive[window.tabsActive.length-1];if(r&&r.tabId==e.tabId&&r.windowId==e.windowId)return}for(;window.tabsActive.length>20;)window.tabsActive.shift();for(var n=window.tabsActive.length-1;n>=0;n--)window.tabsActive[n].tabId==e.tabId&&window.tabsActive.splice(n,1);window.tabsActive.push(e)}ie()}async function br(){await a.default.sidebarAction.open()}async function hr(){var e=!1;try{e=await N("openInOwnTab")}catch{e=!1}e?(await a.default.action.setPopup({popup:"popup.html?popup=true"}),await a.default.action.openPopup(),await a.default.action.setPopup({popup:""})):await a.default.action.openPopup()}async function we(){var e=a.default.runtime.getURL("popup.html"),r=await a.default.tabs.query({}),n,t;window.tabsActive&&window.tabsActive.length>1&&(n=window.tabsActive[window.tabsActive.length-1],t=window.tabsActive[window.tabsActive.length-2]);for(var o=0;o<r.length;o++){var i=r[o];if(i.url.indexOf("popup.html")>-1&&i.url.indexOf(e)>-1)return n&&n.tabId&&i.id==n.tabId&&t&&t.tabId?se(t):a.default.windows.update(i.windowId,{focused:!0}).then(function(){a.default.tabs.highlight({windowId:i.windowId,tabs:i.index})}.bind(this))}return a.default.tabs.create({url:"popup.html"})}async function er(){var e=!1;try{e=await N("openInOwnTab")}catch{e=!1}console.log(e),await a.default.action.onClicked.removeListener(we),e?(await a.default.action.setPopup({popup:""}),await a.default.action.onClicked.addListener(we)):await a.default.action.setPopup({popup:"popup.html?popup=true"}),a.default.sidebarAction&&a.default.sidebarAction.setPanel({panel:"popup.html?panel=true"})}var S=[];S.push({title:"\u{1F4D4} Open in own tab",id:"open_in_own_tab",contexts:["browser_action"],onclick:we});a.default.action.openPopup&&S.push({title:"\u{1F4D1} Open popup",id:"open_popup",contexts:["browser_action"],onclick:hr});a.default.sidebarAction&&S.push({title:"\u{1F5C2} Open sidebar",id:"open_sidebar",contexts:["browser_action"],onclick:br});S.push({type:"separator",id:"sep_1",contexts:["browser_action"]});S.push({title:"\u{1F60D} Support this extension",id:"support_menu",contexts:["browser_action"]});S.push({title:"\u2B50 Leave a review",contexts:["browser_action"],id:"leave_a_review",parentId:"support_menu",onclick:function(r,n){navigator.userAgent.search("Firefox")>-1?a.default.tabs.create({url:"https://addons.mozilla.org/en-US/firefox/addon/tab-manager-plus-for-firefox/"}):a.default.tabs.create({url:"https://chrome.google.com/webstore/detail/tab-manager-plus-for-chro/cnkdjjdmfiffagllbiiilooaoofcoeff"})}});S.push({title:"\u2615 Donate to keep Extensions Alive",contexts:["browser_action"],id:"donate",parentId:"support_menu",onclick:function(r,n){a.default.tabs.create({url:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=67TZLSEGYQFFW"})}});S.push({title:"\u{1F4B0} Become a Patron",contexts:["browser_action"],id:"patron",parentId:"support_menu",onclick:function(r,n){a.default.tabs.create({url:"https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=67TZLSEGYQFFW"})}});S.push({title:"\u{1F426} Follow on Twitter",contexts:["browser_action"],id:"follow_x",parentId:"support_menu",onclick:function(r,n){a.default.tabs.create({url:"https://www.twitter.com/mastef"})}});S.push({title:"\u{1F914} Issues and Suggestions",id:"code_menu",contexts:["browser_action"]});S.push({title:"\u{1F195} View recent changes",contexts:["browser_action"],id:"view_changes",parentId:"code_menu",onclick:function(r,n){a.default.tabs.create({url:"changelog.html"})}});S.push({title:"\u2699 Edit Options",contexts:["browser_action"],id:"edit_options",parentId:"code_menu",onclick:function(r,n){a.default.tabs.create({url:"options.html"})}});S.push({title:"\u{1F4BB} View source code",contexts:["browser_action"],id:"view_source",parentId:"code_menu",onclick:function(r,n){a.default.tabs.create({url:"https://github.com/stefanXO/Tab-Manager-Plus"})}});S.push({title:"\u{1F914} Report an issue",contexts:["browser_action"],id:"report",parentId:"code_menu",onclick:function(r,n){a.default.tabs.create({url:"https://github.com/stefanXO/Tab-Manager-Plus/issues"})}});S.push({title:"\u{1F4A1} Send a suggestion",contexts:["browser_action"],id:"send_sugg",parentId:"code_menu",onclick:function(r,n){a.default.tabs.create({url:"https://github.com/stefanXO/Tab-Manager-Plus/issues"}),a.default.tabs.create({url:"mailto:markus+tmp@stefanxo.com"})}});async function rr(){await a.default.contextMenus.removeAll();for(let e of S){let r={...e};delete r.onclick,r.contexts=["browser_action","action"],await a.default.contextMenus.create(r)}a.default.contextMenus.onClicked.removeListener(Je),a.default.contextMenus.onClicked.addListener(Je),er(),a.default.tabs.onCreated.removeListener(Ze),a.default.tabs.onUpdated.removeListener(L),a.default.tabs.onRemoved.removeListener(L),a.default.tabs.onReplaced.removeListener(L),a.default.tabs.onDetached.removeListener(L),a.default.tabs.onAttached.removeListener(L),a.default.tabs.onActivated.removeListener(xe),a.default.tabs.onMoved.removeListener(L),a.default.windows.onFocusChanged.removeListener(Ge),a.default.windows.onCreated.removeListener(He),a.default.windows.onRemoved.removeListener(Ye),a.default.tabs.onCreated.addListener(Ze),a.default.tabs.onUpdated.addListener(L),a.default.tabs.onRemoved.addListener(L),a.default.tabs.onReplaced.addListener(L),a.default.tabs.onDetached.addListener(L),a.default.tabs.onAttached.addListener(L),a.default.tabs.onActivated.addListener(xe),a.default.tabs.onMoved.addListener(L),a.default.windows.onFocusChanged.addListener(Ge),a.default.windows.onCreated.addListener(He),a.default.windows.onRemoved.addListener(Ye),ie(),setTimeout(_r,5e3)}function Je(e,r){let n=S.find(t=>t.id===e.menuItemId)?.onclick;n?.(e,r)}function vr(e,r,n){var t;return function(){var o=this,i=arguments,m=function(){t=null,n||e.apply(o,i)},l=n&&!t;clearTimeout(t),t=setTimeout(m,r),l&&e.apply(o,i)}}async function Ge(e){try{e&&(await oe(e),yr(e))}catch{}}function He(e){try{e&&e.id&&oe(e.id)}catch{}}function Ye(e){try{e&&oe(e)}catch{}}async function yr(e){if(!(navigator.userAgent.search("Firefox")>-1)&&!(!e||e<0)){if(typeof await N("hideWindows")>"u"&&await B("hideWindows",0),await N("hideWindows")===0)return;var r=await a.default.permissions.contains({permissions:["system.display"]});r&&chrome.system.display.getInfo(async function(n,t){window.displayInfo=[];var o=!0,i=!1,m=void 0;try{for(var l=t[Symbol.iterator](),p;!(o=(p=l.next()).done);o=!0){var v=p.value;window.displayInfo.push(v.bounds)}}catch(M){i=!0,m=M}finally{try{!o&&l.return&&l.return()}finally{if(i)throw m}}for(var w=await a.default.windows.getAll({populate:!0}),C=-1,h=w.length-1;h>=0;h--)if(w[h].id==n)for(var y in window.displayInfo){var T=Xe(w[h],window.displayInfo[y]);T&&(C=y)}for(var h=w.length-1;h>=0;h--)w[h].id!=n&&Xe(w[h],window.displayInfo[C])&&await a.default.windows.update(w[h].id,{state:"minimized"})}.bind(null,e))}}function Xe(e,r){var n=e,t=r;return n.left>=t.left&&n.left<=t.left+t.width&&n.top>=t.top&&n.top<=t.top+t.height}async function oe(e){if(!(e<0)){var r=await N("windowAge");r instanceof Array||(r=[]),r.indexOf(e)>-1&&r.splice(r.indexOf(e),1),r.unshift(e),await B("windowAge",r)}}a.default.commands.onCommand.addListener(function(e){e=="switch_to_previous_active_tab"&&window.tabsActive&&window.tabsActive.length>1&&se(window.tabsActive[window.tabsActive.length-2])});G("reload_popup_controls",er);(async function(){var e=await a.default.windows.getAll({populate:!0});if(await B("windowAge",[]),e&&e.length>0){e.sort(function(n,t){return n.id<t.id?1:n.id>t.id?-1:0});for(var r=0;r<e.length;r++)e[r].id&&await oe(e[r].id)}})();async function _r(){var e=await a.default.windows.getAll({populate:!0}),r=[];for(var n of e)r.push(n.id);var t=await N("windowAge");t instanceof Array||(t=[]);for(var o=t.length-1;o>=0;o--)r.indexOf(t[o])<0&&t.splice(o,1);await B("windowAge",t);var i=await N("windowNames")??{};for(var m of Object.keys(i))r.indexOf(parseInt(m))<0&&delete i[m];await B("windowNames",i)}setInterval(rr,3e5);rr()});kr();})();
